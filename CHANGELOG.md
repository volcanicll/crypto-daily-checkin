# 更新日志

## [2026-01-12] 功能更新

### 新增功能

- **Agent Code 前沿资讯模块**

  - 聚合 GitHub Blog、Anthropic、OpenAI 官方博客
  - 抓取 GitHub Trending 热门 AI/ML 开源项目
  - 社区讨论：Reddit r/LocalLLaMA、r/MachineLearning、Lobste.rs、Hacker News
  - 开发者资讯：Dev.to AI、Echo JS
  - 智能关键词过滤（agent, copilot, cursor, vibe coding 等）

- **AI 精选推荐模块**
  - 收集所有资讯后发送给 LLM 进行价值评估
  - AI 从全部内容中筛选最有价值的 6 条
  - 每条推荐附带 AI 给出的推荐理由
  - 解决了简单限制来源条数可能遗漏重要消息的问题

### 优化

- **钉钉 Markdown 排版优化**

  - 新增 `DingTalkMarkdownUtils.js` 格式化工具类
  - 统一的模块标题格式 `## 🏆 标题`
  - 使用分隔线 `---` 优化视觉层级
  - 价格信息使用粗体高亮
  - 引用块格式化 AI 锐评

- **消息格式重构**
  - 各 Formatter 使用统一的格式化工具
  - 添加消息头部日期显示
  - 优化链接列表排版

### 新增环境变量

| 变量                        | 默认 | 说明                |
| --------------------------- | ---- | ------------------- |
| `MODULE_AGENT_CODE`         | true | Agent Code 前沿资讯 |
| `MODULE_AI_RECOMMENDATIONS` | true | AI 精选推荐         |

---

## [2025-12-18] 功能更新

### 新增功能

- **钉钉群机器人推送**
  - 支持加签 (HMAC-SHA256) 安全验证方式
  - 支持 Markdown 格式消息
  - 长消息自动分片发送
- **LLM 智能锐评**
  - 集成 OpenRouter / OpenAI 兼容格式 API
  - 每日自动生成市场分析与资讯点评

### 优化

- **模块化开关配置**
  - 通过环境变量灵活启用/禁用各功能模块
  - 支持通知渠道独立开关
- **消息分片机制**
  - 抽取通用 `messageSplitter` 工具函数
  - 钉钉/企业微信共享分片逻辑
- **README 文档**
  - 新增推送服务 Token 获取详细指南
  - 完善项目结构说明

---

## [2025-02-18] 功能更新

### 新增功能

- 迁移至 Bun 运行时环境
  - 显著提升运行性能和稳定性
  - 优化依赖管理和构建流程
  - 美化命令行输出效果
- 添加每日天气预报功能
  - 支持重庆地区天气信息查询
  - 显示温度、风向等详细信息
- 添加温馨话语功能
  - 每日随机发送暖心情话
  - 支持备用 API 自动切换
- 优化消息格式
  - 添加 emoji 表情
  - 更友好的展示方式

### 消息格式示例

```
崽崽早安！💖

【今日天气】
重庆 晴
🌡️ 温度：20℃ ~ 28℃
💨 风向：东南风 3级
💡 温馨提示：天气不错，适合出门走走

【温馨话语】
月亮不会奔向太阳，我却可以奔向你。

周三了
```

### 技术细节

- 使用 Bun 运行时环境
  - 更快的启动速度和执行效率
  - 内置的依赖管理和构建工具
  - 优化的异步处理机制
- 使用 vvhan API 获取天气数据
- 使用 lovelive.tools 和 uomg API 获取情话数据
- 完善的错误处理机制
- API 失败自动切换备用方案

### 目录结构

```
├── src/                    # 源代码目录
│   ├── config/            # 配置文件目录
│   ├── services/          # 业务服务目录
│   │   └── notification/  # 通知相关服务
│   ├── utils/             # 工具函数
│   └── app.js            # 应用入口文件
├── .env                   # 环境变量
└── README.md             # 项目文档
```

### 注意事项

- 所有 API 均为免费公开接口
- 如遇到 API 访问失败会自动使用备用方案
- 消息发送失败会在控制台输出错误日志
